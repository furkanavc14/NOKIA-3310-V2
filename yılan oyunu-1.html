<!DOCTYPE html> <!-- HTML5 doctype bildirimi -->
<html lang="tr"> <!-- Sayfa dili TÃ¼rkÃ§e -->
<head>
    <meta charset="UTF-8"> <!-- TÃ¼rkÃ§e karakter desteÄŸi -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Mobil uyumlu gÃ¶rÃ¼nÃ¼m -->
    <title>ğŸ NOKÄ°A 3310 V2</title> <!-- Sayfa baÅŸlÄ±ÄŸÄ± -->
    <style>
        * {
            margin: 0; /* VarsayÄ±lan margin sÄ±fÄ±rla */
            padding: 0; /* VarsayÄ±lan padding sÄ±fÄ±rla */
            box-sizing: border-box; /* Kutu modeli ayarÄ± */
        }

        body {
            font-family: 'Arial', sans-serif; /* YazÄ± tipi */
            background: linear-gradient(135deg, #1e293b, #7c3aed, #1e293b); /* Arka plan gradyanÄ± */
            min-height: 100vh; /* Minimum ekran yÃ¼ksekliÄŸi */
            display: flex; /* Ortalamak iÃ§in flex kullan */
            align-items: center; /* Dikey ortala */
            justify-content: center; /* Yatay ortala */
            color: white; /* YazÄ± rengi */
        }

        .game-container {
            background: rgba(0, 0, 0, 0.2); /* YarÄ± saydam arka plan */
            backdrop-filter: blur(10px); /* Arka planÄ± bulanÄ±klaÅŸtÄ±rÄ±r */
            border-radius: 20px; /* KÃ¶ÅŸeleri yuvarlatÄ±r */
            padding: 30px; /* Ä°Ã§ boÅŸluk */
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3); /* GÃ¶lge efekti */
            border: 1px solid rgba(255, 255, 255, 0.1); /* Ä°nce kenarlÄ±k */
        }

        .game-header {
            display: flex; /* Esnek kutu dÃ¼zeni */
            justify-content: space-between; /* ElemanlarÄ± iki yana yay */
            align-items: center; /* Dikeyde ortala */
            margin-bottom: 30px; /* Alt boÅŸluk */
            flex-wrap: wrap; /* TaÅŸma durumunda sar */
            gap: 20px; /* BoÅŸluklar arasÄ± mesafe */
        }

        .game-title {
            font-size: 2.5rem; /* BaÅŸlÄ±k yazÄ± boyutu */
            font-weight: bold; /* BaÅŸlÄ±k kalÄ±n yazÄ± */
            color: #00ff88; /* BaÅŸlÄ±k rengi */
            text-shadow: 0 0 20px rgba(0, 255, 136, 0.5); /* BaÅŸlÄ±k gÃ¶lgesi */
        }

        .game-stats {
            display: flex; /* Esnek kutu dÃ¼zeni */
            gap: 30px; /* Elemanlar arasÄ± mesafe */
            align-items: center; /* Dikeyde ortala */
        }

        .stat-item {
            text-align: center; /* Merkezde hizala */
        }

        .stat-value {
            font-size: 1.5rem; /* DeÄŸer yazÄ± boyutu */
            font-weight: bold; /* DeÄŸer kalÄ±n yazÄ± */
            color: #00ff88; /* DeÄŸer rengi */
        }

        .stat-label {
            font-size: 0.8rem; /* Etiket yazÄ± boyutu */
            color: #94a3b8; /* Etiket rengi */
            margin-top: 2px; /* Ãœstten boÅŸluk */
        }

        .level-badge {
            background: linear-gradient(45deg, #fbbf24, #f59e0b); /* Seviye rozet gradyanÄ± */
            color: black; /* YazÄ± rengi */
            padding: 5px 15px; /* Ä°Ã§ boÅŸluk */
            border-radius: 20px; /* KÃ¶ÅŸe yuvarlama */
            font-weight: bold; /* KalÄ±n yazÄ± */
            font-size: 0.9rem; /* YazÄ± boyutu */
        }

        .game-canvas {
            border: 3px solid rgba(255, 255, 255, 0.2); /* Tuval kenarlÄ±ÄŸÄ± */
            border-radius: 15px; /* Tuval kÃ¶ÅŸe yuvarlama */
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.3); /* Tuval gÃ¶lgesi */
            background: linear-gradient(45deg, #1a202c, #2d3748); /* Tuval arka plan gradyanÄ± */
            position: relative; /* KonumlandÄ±rma iÃ§in relatif */
            overflow: hidden; /* TaÅŸmayÄ± gizle */
        }

        .game-canvas::before {
            content: ''; /* Ä°Ã§erik yok */
            position: absolute; /* Mutlak konumlandÄ±rma */
            top: 0; /* Ãœstten sÄ±fÄ±rla */
            left: 0; /* Soldan sÄ±fÄ±rla */
            right: 0; /* SaÄŸdan sÄ±fÄ±rla */
            bottom: 0; /* Alttan sÄ±fÄ±rla */
            background: 
                linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px),
                linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px); /* Ã‡izgili arka plan */
            background-size: 20px 20px; /* Arka plan boyutu */
            pointer-events: none; /* OlaylarÄ± engelleme */
        }

        #gameCanvas {
            display: block; /* Blok dÃ¼zende gÃ¶ster */
            border-radius: 12px; /* Kenar yuvarlama */
        }

        .game-controls {
            display: flex; /* Esnek kutu dÃ¼zeni */
            justify-content: space-between; /* ElemanlarÄ± iki yana yay */
            align-items: center; /* Dikeyde ortala */
            margin-top: 25px; /* Ãœstten boÅŸluk */
            flex-wrap: wrap; /* TaÅŸma durumunda sar */
            gap: 15px; /* Elemanlar arasÄ± mesafe */
        }

        .control-buttons {
            display: flex; /* Esnek kutu dÃ¼zeni */
            gap: 15px; /* Butonlar arasÄ± mesafe */
        }

        .btn {
            padding: 12px 20px; /* Ä°Ã§ boÅŸluk */
            border: none; /* KenarlÄ±k yok */
            border-radius: 10px; /* Kenar yuvarlama */
            font-weight: bold; /* KalÄ±n yazÄ± */
            cursor: pointer; /* Ãœzerine gelince imleci deÄŸiÅŸtir */
            transition: all 0.3s ease; /* GeÃ§iÅŸ efekti */
            display: flex; /* Esnek kutu dÃ¼zeni */
            align-items: center; /* Dikeyde ortala */
            gap: 8px; /* Ä°kon ve metin arasÄ± mesafe */
            font-size: 0.9rem; /* YazÄ± boyutu */
        }

        .btn:hover {
            transform: translateY(-2px); /* Ãœzerine gelince yukarÄ± kaydÄ±r */
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3); /* GÃ¶lge efekti */
        }

        .btn-primary {
            background: linear-gradient(45deg, #3b82f6, #1d4ed8); /* Ana buton gradyanÄ± */
            color: white; /* YazÄ± rengi */
        }

        .btn-success {
            background: linear-gradient(45deg, #10b981, #059669); /* BaÅŸarÄ± butonu gradyanÄ± */
            color: white; /* YazÄ± rengi */
        }

        .btn:disabled {
            opacity: 0.5; /* YarÄ± saydam yap */
            cursor: not-allowed; /* Ä°mleci engelli yap */
            transform: none; /* KaydÄ±rma efektini kaldÄ±r */
        }

        .game-instructions {
            color: rgba(255, 255, 255, 0.7); /* Talimat rengi */
            font-size: 0.85rem; /* YazÄ± boyutu */
            text-align: right; /* SaÄŸa yasla */
        }

        .food-legend {
            display: flex; /* Esnek kutu dÃ¼zeni */
            justify-content: center; /* Ortala */
            gap: 25px; /* Elemanlar arasÄ± mesafe */
            margin-top: 20px; /* Ãœstten boÅŸluk */
            font-size: 0.85rem; /* YazÄ± boyutu */
            color: rgba(255, 255, 255, 0.8); /* Renk */
        }

        .legend-item {
            display: flex; /* Esnek kutu dÃ¼zeni */
            align-items: center; /* Dikeyde ortala */
            gap: 8px; /* Ä°kon ve metin arasÄ± mesafe */
        }

        .legend-color {
            width: 12px; /* Renk Ã§emberi geniÅŸliÄŸi */
            height: 12px; /* Renk Ã§emberi yÃ¼ksekliÄŸi */
            border-radius: 50%; /* Tam daire yap */
        }

        .overlay {
            position: absolute; /* Mutlak konumlandÄ±rma */
            top: 0; /* Ãœstten sÄ±fÄ±rla */
            left: 0; /* Soldan sÄ±fÄ±rla */
            width: 100%; /* Tam geniÅŸlik */
            height: 100%; /* Tam yÃ¼kseklik */
            background: rgba(0, 0, 0, 0.8); /* Koyu yarÄ± saydam arka plan */
            display: flex; /* Esnek kutu dÃ¼zeni */
            flex-direction: column; /* Dikey yÃ¶nde yerleÅŸtir */
            align-items: center; /* Ortala */
            justify-content: center; /* Ortala */
            border-radius: 12px; /* Kenar yuvarlama */
            z-index: 10; /* Ãœstte gÃ¶ster */
        }

        .overlay h2 {
            font-size: 3rem; /* BaÅŸlÄ±k yazÄ± boyutu */
            margin-bottom: 20px; /* Alt boÅŸluk */
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5); /* GÃ¶lge efekti */
        }

        .overlay p {
            font-size: 1.2rem; /* Metin yazÄ± boyutu */
            margin-bottom: 10px; /* Alt boÅŸluk */
        }

        .pause-overlay h2 {
            color: #fbbf24; /* BaÅŸlÄ±k rengi */
        }

        .gameover-overlay h2 {
            color: #ef4444; /* BaÅŸlÄ±k rengi */
        }

        .new-highscore {
            color: #fbbf24; /* Renk */
            font-size: 1.1rem; /* YazÄ± boyutu */
            margin-top: 10px; /* Ãœstten boÅŸluk */
            animation: pulse 2s infinite; /* Pulse animasyonu */
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; } /* BaÅŸlangÄ±Ã§ ve bitiÅŸ opaklÄ±ÄŸÄ± */
            50% { opacity: 0.7; } /* Ortada opaklÄ±k */
        }

        @media (max-width: 768px) {
            .game-container {
                padding: 20px; /* Ä°Ã§ boÅŸluk */
                margin: 10px; /* DÄ±ÅŸ boÅŸluk */
            }
            
            .game-header {
                flex-direction: column; /* Dikey yerleÅŸim */
                text-align: center; /* Ortala */
            }
            
            .game-title {
                font-size: 2rem; /* BaÅŸlÄ±k yazÄ± boyutu */
            }
            
            .game-stats {
                gap: 20px; /* Elemanlar arasÄ± mesafe */
            }
            
            .game-controls {
                flex-direction: column; /* Dikey yerleÅŸim */
                align-items: center; /* Ortala */
            }
            
            .game-instructions {
                text-align: center; /* Ortala */
            }
            
            .food-legend {
                flex-wrap: wrap; /* Sarma */
                gap: 15px; /* Elemanlar arasÄ± mesafe */
            }
        }
    </style>
</head>
<body>
    <div class="game-container"> <!-- Oyun kutusu -->
        <div class="game-header"> <!-- BaÅŸlÄ±k ve skor alanÄ± -->
            <h1 class="game-title">ğŸ NOKÄ°A 3310 V2</h1> <!-- Oyun baÅŸlÄ±ÄŸÄ± -->
            <div class="game-stats"> <!-- Skor ve seviye gÃ¶stergeleri -->
                <div class="level-badge">
                    âš¡ Level <span id="levelDisplay">1</span> <!-- Seviye gÃ¶stergesi -->
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="scoreDisplay">0</div> <!-- AnlÄ±k skor -->
                    <div class="stat-label">Skor</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="highScoreDisplay">0</div> <!-- En yÃ¼ksek skor -->
                    <div class="stat-label">ğŸ† En YÃ¼ksek</div>
                </div>
            </div>
        </div>

        <div class="game-canvas"> <!-- Oyun alanÄ± -->
            <canvas id="gameCanvas" width="800" height="600"></canvas> <!-- Oyun iÃ§in tuval -->
            
            <div id="pauseOverlay" class="overlay pause-overlay" style="display: none;">
                <h2>DURAKLADI</h2>
                <p>Devam etmek iÃ§in SPACE tuÅŸuna basÄ±n</p>
            </div>
            
            <div id="gameOverOverlay" class="overlay gameover-overlay" style="display: none;">
                <h2>OYUN BÄ°TTÄ°</h2>
                <p>Skorunuz: <span id="finalScore">0</span></p>
                <p id="newHighScore" class="new-highscore" style="display: none;">ğŸ‰ YENÄ° REKOR! ğŸ‰</p>
                <p>Yeniden baÅŸlamak iÃ§in R tuÅŸuna basÄ±n</p>
            </div>
        </div>

        <div class="game-controls"> <!-- Kontrol butonlarÄ± ve talimatlar -->
            <div class="control-buttons">
                <button id="pauseBtn" class="btn btn-primary">
                    <span id="pauseIcon">â¸ï¸</span>
                    <span id="pauseText">Duraklat</span>
                </button>
                <button id="restartBtn" class="btn btn-success">
                    ğŸ”„ Yeni Oyun
                </button>
            </div>
            <div class="game-instructions">
                <div>ğŸ® WASD veya Ok tuÅŸlarÄ± ile hareket edin</div>
                <div>â¸ï¸ SPACE ile duraklat â€¢ ğŸ”„ R ile yeniden baÅŸlat</div>
            </div>
        </div>

        <div class="food-legend"> <!-- Yiyecek tÃ¼rleri efsanesi -->
            <div class="legend-item">
                <div class="legend-color" style="background: #ef4444;"></div>
                <span>Normal (+10)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #f97316;"></div>
                <span>Ã–zel (+25)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #3b82f6;"></div>
                <span>Bonus (+50)</span>
            </div>
        </div>
        <div style="position: fixed; right: 20px; bottom: 10px; color: #00ff88; font-weight: bold; font-size: 1.1rem; z-index: 1000; text-shadow: 0 0 10px #000;">GT HAVAYOLLARI GURUR Ä°LE SUNAR...</div>
    </div>

    <script>
        // Oyun sabitleri
        const GRID_SIZE = 20; // Her bir hÃ¼crenin boyutu (px)
        const CANVAS_WIDTH = 800; // Tuval geniÅŸliÄŸi
        const CANVAS_HEIGHT = 600; // Tuval yÃ¼ksekliÄŸi
        const GRID_WIDTH = CANVAS_WIDTH / GRID_SIZE; // Yatayda kaÃ§ hÃ¼cre var
        const GRID_HEIGHT = CANVAS_HEIGHT / GRID_SIZE; // Dikeyde kaÃ§ hÃ¼cre var

        const DIRECTIONS = {
            UP: { x: 0, y: -1 }, // YukarÄ± hareket
            DOWN: { x: 0, y: 1 }, // AÅŸaÄŸÄ± hareket
            LEFT: { x: -1, y: 0 }, // Sola hareket
            RIGHT: { x: 1, y: 0 } // SaÄŸa hareket
        };

        // Oyun durumu
        let gameState = {
            snake: [{ x: 10, y: 10 }], // YÄ±lanÄ±n baÅŸlangÄ±Ã§ konumu
            food: null, // Yiyecek nesnesi
            direction: DIRECTIONS.RIGHT, // YÄ±lanÄ±n mevcut yÃ¶nÃ¼
            nextDirection: DIRECTIONS.RIGHT, // Sonraki yÃ¶n (kullanÄ±cÄ±dan gelen)
            score: 0, // AnlÄ±k skor
            highScore: getHighScore(), // En yÃ¼ksek skor (localStorage'dan)
            gameOver: false, // Oyun bitti mi?
            paused: false, // Oyun duraklatÄ±ldÄ± mÄ±?
            speed: 8, // Oyun hÄ±zÄ± (FPS)
            level: 1 // Seviye
        };

        // Tuval ve baÄŸlam
        const canvas = document.getElementById('gameCanvas'); // Tuval elementi
        const ctx = canvas.getContext('2d'); // 2D Ã§izim baÄŸlamÄ±

        // Oyun elemanlarÄ± (HTML)
        const scoreDisplay = document.getElementById('scoreDisplay'); // Skor gÃ¶sterimi
        const highScoreDisplay = document.getElementById('highScoreDisplay'); // En yÃ¼ksek skor gÃ¶sterimi
        const levelDisplay = document.getElementById('levelDisplay'); // Seviye gÃ¶sterimi
        const pauseBtn = document.getElementById('pauseBtn'); // Duraklat butonu
        const restartBtn = document.getElementById('restartBtn'); // Yeniden baÅŸlat butonu
        const pauseOverlay = document.getElementById('pauseOverlay'); // Duraklatma ekranÄ±
        const gameOverOverlay = document.getElementById('gameOverOverlay'); // Oyun bitti ekranÄ±
        const finalScore = document.getElementById('finalScore'); // Oyun sonu skor
        const newHighScore = document.getElementById('newHighScore'); // Yeni rekor bildirimi
        const pauseIcon = document.getElementById('pauseIcon'); // Duraklat/Devam ikon
        const pauseText = document.getElementById('pauseText'); // Duraklat/Devam metni

        // Efektler iÃ§in partikÃ¼ller
        let particles = [];

        // YardÄ±mcÄ± fonksiyonlar
        function getRandomPosition() { // Rastgele bir pozisyon dÃ¶ndÃ¼rÃ¼r
            return {
                x: Math.floor(Math.random() * GRID_WIDTH), // Rastgele x
                y: Math.floor(Math.random() * GRID_HEIGHT) // Rastgele y
            };
        }

        function isPositionEqual(pos1, pos2) { // Ä°ki pozisyon aynÄ± mÄ±?
            return pos1.x === pos2.x && pos1.y === pos2.y;
        }

        function isValidPosition(pos) { // Pozisyon oyun alanÄ± iÃ§inde mi?
            return pos.x >= 0 && pos.x < GRID_WIDTH && pos.y >= 0 && pos.y < GRID_HEIGHT;
        }

        function generateFood() { // Yiyecek Ã¼retir (yÄ±lanÄ±n Ã¼stÃ¼ne gelmeyecek ÅŸekilde)
            let position;
            let attempts = 0;
            const maxAttempts = 100;
            
            do {
                position = getRandomPosition(); // Rastgele pozisyon al
                attempts++;
            } while (
                attempts < maxAttempts && 
                gameState.snake.some(segment => isPositionEqual(segment, position)) // YÄ±lanÄ±n Ã¼stÃ¼ne gelmesin
            );

            const rand = Math.random(); // Rastgele sayÄ±
            let type, value, color;

            if (rand < 0.7) {
                type = 'normal'; // %70 normal yiyecek
                value = 10;
                color = '#ef4444';
            } else if (rand < 0.9) {
                type = 'special'; // %20 Ã¶zel yiyecek
                value = 25;
                color = '#f97316';
            } else {
                type = 'bonus'; // %10 bonus yiyecek
                value = 50;
                color = '#3b82f6';
            }

            return { position, type, value, color }; // Yiyecek nesnesi dÃ¶ndÃ¼r
        }

        function moveSnake() { // YÄ±lanÄ± bir adÄ±m hareket ettirir
            const head = gameState.snake[0]; // YÄ±lanÄ±n baÅŸÄ±
            const newHead = {
                x: head.x + gameState.direction.x, // Yeni baÅŸ x
                y: head.y + gameState.direction.y // Yeni baÅŸ y
            };

            gameState.snake.unshift(newHead); // Yeni baÅŸ ekle
            gameState.snake.pop(); // KuyruÄŸu sil
        }

        function growSnake() { // YÄ±lanÄ± uzatÄ±r (yeni segment ekler)
            const tail = gameState.snake[gameState.snake.length - 1]; // Kuyruk
            gameState.snake.push({ ...tail }); // KuyruÄŸun aynÄ±sÄ±nÄ± ekle
        }

        function checkCollision() { // Ã‡arpÄ±ÅŸma kontrolÃ¼ (duvar veya kendisiyle)
            const head = gameState.snake[0]; // YÄ±lanÄ±n baÅŸÄ±
            
            // Duvar Ã§arpÄ±ÅŸmasÄ±
            if (!isValidPosition(head)) {
                return true;
            }
            
            // Kendine Ã§arpma
            for (let i = 1; i < gameState.snake.length; i++) {
                if (isPositionEqual(head, gameState.snake[i])) {
                    return true;
                }
            }
            
            return false;
        }

        function isOppositeDirection(dir1, dir2) { // Ters yÃ¶n kontrolÃ¼ (geri gitmeyi engeller)
            return dir1.x === -dir2.x && dir1.y === -dir2.y;
        }

        function calculateSpeed(level) { // Seviye arttÄ±kÃ§a hÄ±zÄ± artÄ±rÄ±r
            return Math.max(3, 10 - level);
        }

        function calculateLevel(score) { // Skora gÃ¶re seviye hesaplar
            return Math.floor(score / 100) + 1;
        }

        function getHighScore() { // En yÃ¼ksek skoru localStorage'dan alÄ±r
            const saved = localStorage.getItem('snakeHighScore');
            return saved ? parseInt(saved, 10) : 0;
        }

        function saveHighScore(score) { // Skor rekoru kÄ±rdÄ±ysa kaydeder
            const currentHighScore = getHighScore();
            if (score > currentHighScore) {
                localStorage.setItem('snakeHighScore', score.toString());
                return true;
            }
            return false;
        }

        function createParticles(x, y, color) { // Yiyecek yendiÄŸinde partikÃ¼l efekti oluÅŸturur
            for (let i = 0; i < 10; i++) {
                particles.push({
                    x: x + GRID_SIZE / 2, // BaÅŸlangÄ±Ã§ x
                    y: y + GRID_SIZE / 2, // BaÅŸlangÄ±Ã§ y
                    vx: (Math.random() - 0.5) * 4, // X yÃ¶nÃ¼ hÄ±zÄ±
                    vy: (Math.random() - 0.5) * 4, // Y yÃ¶nÃ¼ hÄ±zÄ±
                    life: 1, // YaÅŸam sÃ¼resi
                    color: color // Renk
                });
            }
        }

        function updateParticles() { // PartikÃ¼lleri gÃ¼nceller ve Ã¶mrÃ¼ bitenleri siler
            particles = particles.filter(particle => {
                particle.x += particle.vx; // X konumunu gÃ¼ncelle
                particle.y += particle.vy; // Y konumunu gÃ¼ncelle
                particle.life -= 0.02; // YaÅŸam sÃ¼resini azalt
                return particle.life > 0; // YaÅŸam sÃ¼resi bitenleri sil
            });
        }

        // Ã‡izim fonksiyonlarÄ±
        function drawBackground() { // Arka planÄ± Ã§izer
            const gradient = ctx.createLinearGradient(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); // Gradyan oluÅŸtur
            gradient.addColorStop(0, '#1a202c'); // BaÅŸlangÄ±Ã§ rengi
            gradient.addColorStop(1, '#2d3748'); // BitiÅŸ rengi
            ctx.fillStyle = gradient; // Dolgu rengi ayarla
            ctx.fillRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); // DikdÃ¶rtgen Ã§iz
        }

        function drawSnake() { // YÄ±lanÄ± Ã§izer
            gameState.snake.forEach((segment, index) => {
                const x = segment.x * GRID_SIZE; // Segment x
                const y = segment.y * GRID_SIZE; // Segment y
                
                if (index === 0) { // YÄ±lan baÅŸÄ±
                    ctx.shadowColor = '#00ff88'; // Parlak gÃ¶lge
                    ctx.shadowBlur = 15; // GÃ¶lge bulanÄ±klÄ±ÄŸÄ±
                    ctx.fillStyle = '#00ff88'; // BaÅŸ rengi
                    ctx.strokeStyle = 'rgba(255, 255, 255, 0.4)'; // KenarlÄ±k rengi
                    ctx.lineWidth = 2; // KenarlÄ±k kalÄ±nlÄ±ÄŸÄ±
                    
                    ctx.fillRect(x + 2, y + 2, GRID_SIZE - 4, GRID_SIZE - 4); // BaÅŸ dikdÃ¶rtgeni
                    ctx.strokeRect(x + 2, y + 2, GRID_SIZE - 4, GRID_SIZE - 4); // KenarlÄ±k
                    
                    // GÃ¶zler
                    ctx.shadowBlur = 0; // GÃ¶lgeyi sÄ±fÄ±rla
                    ctx.fillStyle = 'white'; // GÃ¶z beyazÄ±
                    ctx.fillRect(x + 6, y + 6, 4, 4); // Sol gÃ¶z
                    ctx.fillRect(x + GRID_SIZE - 10, y + 6, 4, 4); // SaÄŸ gÃ¶z
                    ctx.fillStyle = 'black'; // GÃ¶z bebeÄŸi
                    ctx.fillRect(x + 7, y + 7, 2, 2); // Sol gÃ¶z bebeÄŸi
                    ctx.fillRect(x + GRID_SIZE - 9, y + 7, 2, 2); // SaÄŸ gÃ¶z bebeÄŸi
                } else { // YÄ±lan gÃ¶vdesi
                    const alpha = 1 - (index / gameState.snake.length) * 0.6; // ÅeffaflÄ±k
                    ctx.shadowBlur = 0; // GÃ¶lge yok
                    ctx.fillStyle = `rgba(0, 200, 100, ${alpha})`; // GÃ¶vde rengi
                    ctx.strokeStyle = 'rgba(255, 255, 255, 0.2)'; // KenarlÄ±k rengi
                    ctx.lineWidth = 1; // KenarlÄ±k kalÄ±nlÄ±ÄŸÄ±
                    
                    ctx.fillRect(x + 3, y + 3, GRID_SIZE - 6, GRID_SIZE - 6); // GÃ¶vde dikdÃ¶rtgeni
                    ctx.strokeRect(x + 3, y + 3, GRID_SIZE - 6, GRID_SIZE - 6); // KenarlÄ±k
                }
            });
        }

        function drawFood() { // YiyeceÄŸi Ã§izer
            if (!gameState.food) return; // Yiyecek yoksa Ã§Ä±k
            
            const x = gameState.food.position.x * GRID_SIZE; // Yiyecek x
            const y = gameState.food.position.y * GRID_SIZE; // Yiyecek y
            
            // NabÄ±z efekti
            const pulse = Math.sin(Date.now() * 0.01) * 0.2 + 1; // YiyeceÄŸin bÃ¼yÃ¼yÃ¼p kÃ¼Ã§Ã¼lmesini saÄŸlar
            const size = (GRID_SIZE - 4) * pulse; // Yiyecek boyutunu nabza gÃ¶re ayarla
            const offset = (GRID_SIZE - size) / 2; // Ortalamak iÃ§in ofset hesapla
            
            ctx.shadowColor = gameState.food.color; // Yiyecek etrafÄ±na renkli gÃ¶lge
            ctx.shadowBlur = 20; // GÃ¶lge bulanÄ±klÄ±ÄŸÄ±
            ctx.fillStyle = gameState.food.color; // Yiyecek rengi
            
            if (gameState.food.type === 'bonus') { // EÄŸer bonus yiyecekse
                // Bonus iÃ§in yÄ±ldÄ±z ÅŸekli
                drawStar(x + GRID_SIZE/2, y + GRID_SIZE/2, size/3, size/6, 5); // YÄ±ldÄ±z Ã§iz
            } else {
                ctx.beginPath(); // Yeni bir ÅŸekil baÅŸlat
                ctx.arc(x + GRID_SIZE/2, y + GRID_SIZE/2, size/2, 0, Math.PI * 2); // Daire Ã§iz
                ctx.fill(); // Daireyi doldur
            }
            
            ctx.shadowBlur = 0; // GÃ¶lgeyi sÄ±fÄ±rla
        }

        function drawStar(x, y, radius1, radius2, npoints) { // YÄ±ldÄ±z ÅŸekli Ã§izer (bonus yiyecek iÃ§in)
            const angle = Math.PI * 2 / npoints; // Her bir kÃ¶ÅŸe arasÄ±ndaki aÃ§Ä±
            const halfAngle = angle / 2; // YarÄ±m aÃ§Ä±
            
            ctx.beginPath(); // Yeni ÅŸekil baÅŸlat
            for (let a = 0; a < Math.PI * 2; a += angle) { // TÃ¼m kÃ¶ÅŸeler iÃ§in dÃ¶ngÃ¼
                let sx = x + Math.cos(a) * radius2; // DÄ±ÅŸ kÃ¶ÅŸe x
                let sy = y + Math.sin(a) * radius2; // DÄ±ÅŸ kÃ¶ÅŸe y
                ctx.lineTo(sx, sy); // Ã‡izgi Ã§iz
                sx = x + Math.cos(a + halfAngle) * radius1; // Ä°Ã§ kÃ¶ÅŸe x
                sy = y + Math.sin(a + halfAngle) * radius1; // Ä°Ã§ kÃ¶ÅŸe y
                ctx.lineTo(sx, sy); // Ã‡izgi Ã§iz
            }
            ctx.closePath(); // Åekli kapat
            ctx.fill(); // Åekli doldur
        }

        function drawParticles() { // PartikÃ¼lleri Ã§izer
            particles.forEach(particle => {
                ctx.globalAlpha = particle.life; // ÅeffaflÄ±k
                ctx.fillStyle = particle.color; // Renk
                ctx.beginPath(); // Yeni ÅŸekil
                ctx.arc(particle.x, particle.y, 2, 0, Math.PI * 2); // Daire
                ctx.fill(); // Doldur
            });
            ctx.globalAlpha = 1; // ÅeffaflÄ±ÄŸÄ± sÄ±fÄ±rla
        }

        // Oyun mantÄ±ÄŸÄ±
        function updateGame() { // Oyun durumunu gÃ¼nceller
            if (gameState.paused || gameState.gameOver) return; // DuraklatÄ±ldÄ±ysa veya bittiyse Ã§Ä±k
            
            // YÃ¶nÃ¼ gÃ¼ncelle
            gameState.direction = gameState.nextDirection;
            
            // YÄ±lanÄ± hareket ettir
            moveSnake();
            
            // Ã‡arpÄ±ÅŸma kontrolÃ¼
            if (checkCollision()) {
                gameState.gameOver = true; // Oyun bitti
                const isNewHighScore = saveHighScore(gameState.score); // Rekor kÄ±rÄ±ldÄ± mÄ±?
                showGameOver(isNewHighScore); // Oyun bitti ekranÄ±
                return;
            }
            
            // Yiyecek yeme kontrolÃ¼
            if (gameState.food && isPositionEqual(gameState.snake[0], gameState.food.position)) {
                // YÄ±lanÄ± uzat
                growSnake();
                
                // Skoru artÄ±r
                gameState.score += gameState.food.value;
                
                // PartikÃ¼l efekti oluÅŸtur
                const foodX = gameState.food.position.x * GRID_SIZE;
                const foodY = gameState.food.position.y * GRID_SIZE;
                createParticles(foodX, foodY, gameState.food.color);
                
                // Yeni yiyecek oluÅŸtur
                gameState.food = generateFood();
                
                // Seviye ve hÄ±zÄ± gÃ¼ncelle
                const newLevel = calculateLevel(gameState.score);
                if (newLevel > gameState.level) {
                    gameState.level = newLevel;
                    gameState.speed = calculateSpeed(gameState.level);
                }
                
                // En yÃ¼ksek skoru gÃ¼ncelle
                if (gameState.score > gameState.highScore) {
                    gameState.highScore = gameState.score;
                }
                
                updateDisplay();
            }
        }

        function render() { // TÃ¼m oyun elemanlarÄ±nÄ± Ã§izer
            drawBackground(); // Arka plan
            drawFood(); // Yiyecek
            drawSnake(); // YÄ±lan
            drawParticles(); // PartikÃ¼ller
            updateParticles(); // PartikÃ¼l gÃ¼ncelle
        }

        function updateDisplay() { // Skor, seviye ve rekoru ekrana yazar
            scoreDisplay.textContent = gameState.score; // Skor
            highScoreDisplay.textContent = gameState.highScore; // En yÃ¼ksek skor
            levelDisplay.textContent = gameState.level; // Seviye
        }

        function showGameOver(isNewHighScore) { // Oyun bitti ekranÄ±nÄ± gÃ¶sterir
            finalScore.textContent = gameState.score; // Son skor
            newHighScore.style.display = isNewHighScore ? 'block' : 'none'; // Rekor bildirimi
            gameOverOverlay.style.display = 'flex'; // Oyun bitti ekranÄ± gÃ¶ster
        }

        function togglePause() { // Oyunu duraklatÄ±r/devam ettirir
            if (gameState.gameOver) return; // Oyun bittiyse Ã§Ä±k
            
            gameState.paused = !gameState.paused; // Duraklat/Devam et
            pauseOverlay.style.display = gameState.paused ? 'flex' : 'none'; // Duraklatma ekranÄ±
            pauseIcon.textContent = gameState.paused ? 'â–¶ï¸' : 'â¸ï¸'; // Ä°kon deÄŸiÅŸtir
            pauseText.textContent = gameState.paused ? 'Devam Et' : 'Duraklat'; // Metin deÄŸiÅŸtir
        }

        function resetGame() { // Oyunu baÅŸa alÄ±r
            gameState = {
                snake: [{ x: 10, y: 10 }], // BaÅŸlangÄ±Ã§ yÄ±lanÄ±
                food: generateFood(), // Yeni yiyecek
                direction: DIRECTIONS.RIGHT, // BaÅŸlangÄ±Ã§ yÃ¶nÃ¼
                nextDirection: DIRECTIONS.RIGHT, // Sonraki yÃ¶n
                score: 0, // Skor sÄ±fÄ±rla
                highScore: getHighScore(), // En yÃ¼ksek skor
                gameOver: false, // Oyun bitti mi?
                paused: false, // DuraklatÄ±ldÄ± mÄ±?
                speed: 8, // HÄ±z
                level: 1 // Seviye
            };
            
            particles = []; // PartikÃ¼lleri sÄ±fÄ±rla
            pauseOverlay.style.display = 'none'; // Duraklatma ekranÄ± kapat
            gameOverOverlay.style.display = 'none'; // Oyun bitti ekranÄ± kapat
            pauseIcon.textContent = 'â¸ï¸'; // Ä°konu sÄ±fÄ±rla
            pauseText.textContent = 'Duraklat'; // Metni sÄ±fÄ±rla
            
            updateDisplay(); // SkorlarÄ± gÃ¼ncelle
        }

        // Olay dinleyiciler
        document.addEventListener('keydown', (e) => { // Klavye kontrolleri
            if (e.code === 'Space') { // Space tuÅŸu
                e.preventDefault(); // VarsayÄ±lanÄ± engelle
                togglePause(); // Duraklat/Devam et
                return;
            }
            
            if (e.key === 'r' || e.key === 'R') { // R tuÅŸu
                resetGame(); // Yeniden baÅŸlat
                return;
            }
            
            if (gameState.paused || gameState.gameOver) return; // DuraklatÄ±ldÄ±ysa veya bittiyse Ã§Ä±k
            
            let newDirection = gameState.nextDirection; // Yeni yÃ¶n
            
            switch(e.code) { // YÃ¶n tuÅŸlarÄ± ve WASD
                case 'ArrowUp':
                case 'KeyW':
                    newDirection = DIRECTIONS.UP;
                    break;
                case 'ArrowDown':
                case 'KeyS':
                    newDirection = DIRECTIONS.DOWN;
                    break;
                case 'ArrowLeft':
                case 'KeyA':
                    newDirection = DIRECTIONS.LEFT;
                    break;
                case 'ArrowRight':
                case 'KeyD':
                    newDirection = DIRECTIONS.RIGHT;
                    break;
            }
            
            // Ters yÃ¶ne gitmeyi engelle
            if (!isOppositeDirection(newDirection, gameState.direction)) {
                gameState.nextDirection = newDirection; // YÃ¶nÃ¼ gÃ¼ncelle
            }
        });

        pauseBtn.addEventListener('click', togglePause); // Duraklat butonu
        restartBtn.addEventListener('click', resetGame); // Yeniden baÅŸlat butonu

        // Oyun dÃ¶ngÃ¼sÃ¼
        let lastTime = 0; // Son zaman
        function gameLoop(currentTime) { // Oyun dÃ¶ngÃ¼sÃ¼ fonksiyonu
            // Oyun mantÄ±ÄŸÄ±nÄ± ve Ã§izimi sÃ¼rekli Ã§alÄ±ÅŸtÄ±rÄ±r
            if (currentTime - lastTime > 1000 / gameState.speed) { // FPS ayarÄ±
                updateGame(); // Oyun mantÄ±ÄŸÄ±
                lastTime = currentTime; // ZamanÄ± gÃ¼ncelle
            }
            
            render(); // Ã‡izim
            requestAnimationFrame(gameLoop); // DÃ¶ngÃ¼yÃ¼ devam ettir
        }

        // Oyunu baÅŸlatÄ±r
        function init() { // BaÅŸlatÄ±cÄ± fonksiyon
            gameState.food = generateFood(); // Ä°lk yiyeceÄŸi oluÅŸtur
            updateDisplay(); // SkorlarÄ± gÃ¼ncelle
            gameLoop(0); // Oyun dÃ¶ngÃ¼sÃ¼nÃ¼ baÅŸlat
        }

        // Oyunu baÅŸlat
        init(); // BaÅŸlatÄ±cÄ±yÄ± Ã§aÄŸÄ±r
    </script>
</body>
</html>
